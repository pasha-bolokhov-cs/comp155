<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0087)https://online.camosun.ca/content/enforced/83589-2015Q2COMP155X01AB/Lab17.html?ou=83589 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" src="./assign17_files/9efc9e456b"></script><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info = {"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"9efc9e456b","applicationID":"2089117","transactionName":"b1wHYUNYWxEFUkJbDlYWLUFFSX0DClVaVxMXfVd5H3VlTDBeWV4SFnERQUF0WgYRXVMcIldXEVBfTX0WCV1wWw1MXBd9UFdRDgFD","queueTime":0,"applicationTime":35,"ttGuid":"7BC2446283BCFC06","agent":"js-agent.newrelic.com/nr-536.min.js"}</script><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(n,e,t){function r(t){if(!e[t]){var o=e[t]={exports:{}};n[t][0].call(o.exports,function(e){var o=n[t][1][e];return r(o?o:e)},o,o.exports)}return e[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<t.length;o++)r(t[o]);return r}({QJf3ax:[function(n,e){function t(n){function e(e,t,a){n&&n(e,t,a),a||(a={});for(var u=c(e),f=u.length,s=i(a,o,r),p=0;f>p;p++)u[p].apply(s,t);return s}function a(n,e){f[n]=c(n).concat(e)}function c(n){return f[n]||[]}function u(){return t(e)}var f={};return{on:a,emit:e,create:u,listeners:c,_events:f}}function r(){return{}}var o="nr@context",i=n("gos");e.exports=t()},{gos:"7eSDFh"}],ee:[function(n,e){e.exports=n("QJf3ax")},{}],3:[function(n,e){function t(n){return function(){r(n,[(new Date).getTime()].concat(i(arguments)))}}var r=n("handle"),o=n(1),i=n(2);"undefined"==typeof window.newrelic&&(newrelic=window.NREUM);var a=["setPageViewName","trackUserAction","finished","traceEvent","inlineHit","noticeError"];o(a,function(n,e){window.NREUM[e]=t("api-"+e)}),e.exports=window.NREUM},{1:12,2:13,handle:"D5DuLP"}],gos:[function(n,e){e.exports=n("7eSDFh")},{}],"7eSDFh":[function(n,e){function t(n,e,t){if(r.call(n,e))return n[e];var o=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(n,e,{value:o,writable:!0,enumerable:!1}),o}catch(i){}return n[e]=o,o}var r=Object.prototype.hasOwnProperty;e.exports=t},{}],D5DuLP:[function(n,e){function t(n,e,t){return r.listeners(n).length?r.emit(n,e,t):(o[n]||(o[n]=[]),void o[n].push(e))}var r=n("ee").create(),o={};e.exports=t,t.ee=r,r.q=o},{ee:"QJf3ax"}],handle:[function(n,e){e.exports=n("D5DuLP")},{}],XL7HBI:[function(n,e){function t(n){var e=typeof n;return!n||"object"!==e&&"function"!==e?-1:n===window?0:i(n,o,function(){return r++})}var r=1,o="nr@id",i=n("gos");e.exports=t},{gos:"7eSDFh"}],id:[function(n,e){e.exports=n("XL7HBI")},{}],G9z0Bl:[function(n,e){function t(){var n=v.info=NREUM.info;if(n&&n.licenseKey&&n.applicationID&&f&&f.body){c(d,function(e,t){e in n||(n[e]=t)}),v.proto="https"===l.split(":")[0]||n.sslForHttp?"https://":"http://",a("mark",["onload",i()]);var e=f.createElement("script");e.src=v.proto+n.agent,f.body.appendChild(e)}}function r(){"complete"===f.readyState&&o()}function o(){a("mark",["domContent",i()])}function i(){return(new Date).getTime()}var a=n("handle"),c=n(1),u=(n(2),window),f=u.document,s="addEventListener",p="attachEvent",l=(""+location).split("?")[0],d={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-536.min.js"},v=e.exports={offset:i(),origin:l,features:{}};f[s]?(f[s]("DOMContentLoaded",o,!1),u[s]("load",t,!1)):(f[p]("onreadystatechange",r),u[p]("onload",t)),a("mark",["firstbyte",i()])},{1:12,2:3,handle:"D5DuLP"}],loader:[function(n,e){e.exports=n("G9z0Bl")},{}],12:[function(n,e){function t(n,e){var t=[],o="",i=0;for(o in n)r.call(n,o)&&(t[i]=e(o,n[o]),i+=1);return t}var r=Object.prototype.hasOwnProperty;e.exports=t},{}],13:[function(n,e){function t(n,e,t){e||(e=0),"undefined"==typeof t&&(t=n?n.length:0);for(var r=-1,o=t-e||0,i=Array(0>o?0:o);++r<o;)i[r]=n[e+r];return i}e.exports=t},{}]},{},["G9z0Bl"]);</script>
<style>
body { font-family:Arial, Helvetica, sans-serif;
color:#036;
line-height: 125%;
}
h1 {text-align:center;
}
strong { font-family:Consolas, "Courier New", monospace;
color:#03F;
}
li { margin-bottom: 15px; }
pre { font-family:"Courier New", Courier, monospace;
color:gray;
}
td { padding: 3px; font-family: Consolas, "Courier new", monospace; color: #339;
}
.style1 { font-family: Consolas, "Courier New", monospace;
          font-weight:bold;
  }

.rightcol { color: darkgreen;
          }
.strong {  color: darkgreen;
          font-family:"Courier New", Courier, monospace;
       }
ol.upper-roman {list-style-type: upper-alpha;}
.data  { color: blue;   }

</style>

<script type="text/javascript" src="./assign17_files/MathML.js"></script><script type="text/javascript">D2LMathML.DesktopInit('/d2l/common/mathjax/2.1/MathJax.js?config=MML_HTMLorMML&v=10.3.0.791-39','/d2l/common/mathjax/2.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML&v=10.3.0.791-39');</script><script type="text/x-mathjax-config;executed=true">MathJax.Hub.Config({ delayStartupUntil: "onload",showProcessingMessages: false, messageStyle: "none", showMathMenu: true, showMathMenuMSIE: true, menuSettings: { context: "MathJax", zoom: "None" },NativeMML: { showMathMenuMSIE: false, scale: 140 }, "HTML-CSS": { linebreaks: { automatic: true, width: "container"}, imageFont: null, scale: 130 } });</script><script type="text/javascript" src="./assign17_files/MathJax.js"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Hover_Arrow {position: absolute; width: 15px; height: 11px; cursor: pointer}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuTitle {background-color: #CCCCCC; margin: -5px 0 0 0; text-align: center; font-style: italic; font-size: 80%; color: #444444; padding: 2px 0; overflow: hidden}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style></head>
<body><div id="MathJax_Message" style="display: none;"></div>
<h2>Due</h2>
<p>At the start of your next <b>scheduled</b> lab at the same day and time.<br><span>Lab section 1A:&nbsp;</span><b>due Tuesday, March 17th @ 10:30am</b><br><span>Lab section 1B:&nbsp;</span><b>due Tuesday, March 17th @ 1:00pm</b><br><span>Lab section 2A:&nbsp;</span><b>due Monday, March 16th @ 1:30pm</b><br><span>Lab section 2B:&nbsp;</span><b>due Monday, March 16th @ 3:00pm</b></p>
<h2>Prerequisites</h2>
<p>Attend lecture on MySQL</p>
<p>Be able to use the MySQL documentation available at <a href="http://dev.mysql.com/doc/refman/5.0/en/index.html"> http://dev.mysql.com/doc/refman/5.0/en/index.html</a></p>
<h2>Objective</h2>
<ul>
<li>Understand the basics of MySQL</li>
<li>Examine metadata in MySQL</li>
<li>Run DML and DDL statements in MySQL</li>
</ul>
<h2>Do</h2>
<p>Accounts and databases have been created for each of you on the DEEPBLUE server. Your account name will be the same as your Oracle account name, and your database name will be your full last name with "DB" added to the end. For example, my account name is "Lang" and my database name is "LANGDB". Note that the <b>first letter</b> of your account name and database name are all in upper case. Deepblue is a Linux server, so you will need to be careful with case.</p>
<p>To run MySQL you will need to do the following:</p>
<ul>
<li>Use the SSH client to logon to deepblue (you will use your regular deepblue account to logon). Click Start | Programs | SSH Secure Shell | Secure Shell Client. When the SSH Secure Shell window appears, click on the Quick Connect menu option. When the "Connect to Remote Host" window appears, enter "deepblue.cs.camosun.bc.ca" for Host Name (or just "deepblue" if you are in the Camosun lab), enter your cst account number for user Name. Click on the Connect button. If you see the "HOST IDENTIFICATION HAS CHANGED" window, click on Yes. Enter your cst account password when prompted by the Enter Password window.</li>
<li>At the command prompt type: <span class="style1">mysql -h localhost -u &lt;USERNAME&gt; -p &lt;DATABASE NAME&gt;</span>
<ul>
<li>USERNAME is the same as your Oracle logon id. For example, I would type:&nbsp; <span class="style1">mysql -h localhost -u Lang -p LANGDB</span></li>
<li>You will be prompted for your password. Your password is the initial one you got for your Oracle account - it is the last six digits of your student number.</li>
<li><b>CAUTION:</b> Remember unix is case sensitive so be sure to type your username's first letter and database name in <b>UPPER CASE</b>. If you get an error on the password, contact your instructor.</li>
</ul>
</li>
<li>To ensure you are logged on, type <strong>SHOW TABLES;</strong> to see what tables you currently have in your account. There won't be any to begin.</li>
<li>You are now ready to start the assignment below.</li>
</ul>
<h2>Assignment</h2>
<p><b>Part 1. Set up tables</b></p>
<ul>
<li>You will be using the Oracle provided script to generate the "Scott" database tables and data. The <a href="scott.sql">script is available here</a>. You should make a copy of this script on your H: drive so that you can access it when you are in your deepblue account.</li>
<li>Since the provided script provided is from Oracle, you will need to make some changes before you can run it in MySQL. The changes to note are as follows:
<blockquote>
<p>The data types in MySQL are different than those in Oracle. In particular:</p>
<blockquote>
<ul>
<li>VARCHAR2 → VARCHAR</li>
<li>NUMBER (7,2) → FLOAT (7,2)</li>
<li>NUMBER → INT</li>
<li>You will want to use the "advanced" feature of foreign keys, so be sure to add <strong>ENGINE = INNODB</strong> to your create table statements. For example:<br> <br><strong> CREATE TABLE BONUS<br> (ENAME VARCHAR(10),<br> JOB VARCHAR(9),<br> SAL INT,<br> COMM INT) <br>ENGINE = INNODB; </strong></li>
<li>The <strong>TO_DATE</strong> function does not exist in MySQL. In version 5.0 of MySQL you can use <strong>STR_TO_DATE</strong> instead. You will also need to change the 'dd-mm-yyyy' date string to the MySQL format: '%d-%m-%Y'.</li>
<li>The MySQL you are using in the lab is running under Linux. As a result, table names are CASE SENSITIVE. If you enter the table name in upper case, you must remember to always use upper case when referring to that table.</li>
</ul>
</blockquote>
</blockquote>
</li>
<li>To run the script, type the following after the <strong>mysql&gt;</strong> prompt:&nbsp; <b>source &lt;path&gt;&lt;script filename&gt;</b>
<p>for example: <strong>source ./Lab17_Scott.sql</strong></p>
</li>
<li>Correct any errors and run again if necessary</li>
<li><b><span style="color: red;">CHECKPOINT.</span> </b>Show your instructor that your tables have been loaded and contain data. (Hint use <strong>SHOW TABLES;, DESC &lt;table name&gt;; </strong> and <strong>SELECT * FROM &lt;table name&gt;;</strong>)</li>
</ul>
<p>&nbsp;</p>
<p><b>Part 2. Run Queries</b></p>
<p>You will be required to <strong>SPOOL</strong> the queries and results to a file so that you can print them to hand in.&nbsp;Use the MySQL command <strong>tee &lt;path&gt;&lt;filename&gt;</strong>&nbsp; to spool to a file. Stop spooling with <strong>notee</strong>. Make sure your SQL commands appear in your printout. (If you run everything from a script, your commands will <b>not</b> appear. The best way is to copy and paste your commands after you issue the <strong>tee</strong> command.)</p>
<p>Be sure to use proper formatting for all SQL statement (e.g. put clauses on separate lines).</p>
<blockquote><ol>
<li>
<p>Write a query to list all employees (give their employee numbers and name) who work for the department based in Chicago. (This is a simplification of the query you wrote for Lab 3, Assignment 1.)</p>
</li>
<li>
<p>Write a query to list the employee number, employee name, the employee's manager number, and the employee's manager's name. You may use either SQL/92 or traditional SQL. Your output should look similar to the following:</p>
</li>
</ol>
<blockquote><strong> +----------+------+---------+-------+ <br> | Employee | EMPNo| Manager | MgrNo |<br> +----------+------+---------+-------+<br> | SMITH&nbsp;&nbsp;&nbsp; | 7369 | FORD&nbsp;&nbsp;&nbsp; | 7902 &nbsp;|<br> | ALLEN&nbsp;&nbsp;&nbsp; | 7499 | BLAKE&nbsp;&nbsp; | 7698 &nbsp;| <br> etc...</strong></blockquote>
<blockquote>
<p>(This is essentially the same query you did in Lab 3, Assignment 3.)</p>
</blockquote>
<ol start="3">
<li>
<p>Write a query to display the number of people in the same department. Use <strong>DEPTNO</strong>&nbsp; in your query. Your results should list the department number and the total number of people in that department. The heading for the total number of people column should be "Total". (This is a simplification of the query you wrote for Lab 6, Assignment 1.)</p>
</li>
</ol></blockquote>
<h2>Hand-In</h2>
<ul>
<li>Demonstrate:
<ul>
<li>The existence of your tables at the CHECKPOINT.</li>
</ul>
</li>
<li>Hand in a hard copy of your spooled commands and the results <b>OR</b> submit the spool file to your D2L Dropbox.</li>
</ul>
<h2>Notes:</h2>
<ul>
<li>Aliases in MySQL require the use of the keyword 'AS'. (This keyword is optional in Oracle.) For example:</li>
</ul>
<blockquote><strong>SELECT empno AS "EmployeeNo", dname AS "DeptName"<br>FROM emp AS e, dept AS d<br>WHERE e.deptno = d.deptno;</strong></blockquote>
<ul>
<li>If you wish to run your commands from a script file, the best way is to run the script in batch mode. Use the following command to run the script and generate an output spool file:</li>
</ul>
<blockquote><strong>mysql -vvv -u Username -p DATABASENAME &lt; <i>scriptfile</i> &gt; <i>outputfile</i></strong>
<ul>
<li>You will run this command from the OS command prompt.</li>
<li>The <strong>-vvv</strong> (note that is a hyphen followed by 3 v's) following "<strong>mysql</strong>" says to echo the sql commands.</li>
<li>The <strong>&lt;</strong> before <i>scriptfile</i> must be included. Scriptfile is the name + path of the file you are running.</li>
<li>The <strong>&gt;</strong> before <i>outputfile</i> directs the results to your designated output file so named. Be sure to include the path if necessary.</li>
</ul>
</blockquote>
<script src="./assign17_files/nr-536.min.js"></script></body></html>
